{"ast":null,"code":"import _toConsumableArray from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{IonContent,IonList,IonPage,IonRefresher,IonRefresherContent,useIonViewWillEnter}from'@ionic/react';import'./Home.css';import{IonItemSliding,IonItem,IonLabel,IonItemOptions,IonItemOption}from'@ionic/react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Draft=function Draft(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),players=_useState2[0],setPlayers=_useState2[1];useIonViewWillEnter(function(){fetchAvailablePlayers(true).then(function(players){return setPlayers(players);});});var fetchAvailablePlayers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(cache){var players,drafted;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchPlayers(cache);case 2:players=_context.sent;_context.next=5;return fetchDrafted();case 5:drafted=_context.sent;return _context.abrupt(\"return\",players.filter(function(p){return drafted.findIndex(function(d){return d.name===p.name;})===-1;}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchAvailablePlayers(_x){return _ref.apply(this,arguments);};}();var fetchPlayers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(cache){var data,res,players;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!cache){_context2.next=4;break;}data=localStorage.getItem('dd-all-players');if(!data){_context2.next=4;break;}return _context2.abrupt(\"return\",JSON.parse(data));case 4:_context2.next=6;return fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');case 6:res=_context2.sent;_context2.next=9;return res.json();case 9:players=_context2.sent;localStorage.setItem('dd-all-players',JSON.stringify(players.rankings));return _context2.abrupt(\"return\",players.rankings);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchPlayers(_x2){return _ref2.apply(this,arguments);};}();var fetchDrafted=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data,players,drafted,all;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=localStorage.getItem('dd-players')||'[]';players=JSON.parse(data);data=localStorage.getItem('dd-drafted')||'[]';drafted=JSON.parse(data);all=[].concat(_toConsumableArray(players),_toConsumableArray(drafted));return _context3.abrupt(\"return\",Promise.resolve(all));case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchDrafted(){return _ref3.apply(this,arguments);};}();var refresh=function refresh(e){fetchAvailablePlayers(false).then(function(players){setPlayers(players);e.detail.complete();});};var add=function add(player){var data=localStorage.getItem('dd-players')||'[]';var myPlayers=JSON.parse(data);myPlayers.push(player);localStorage.setItem('dd-players',JSON.stringify(myPlayers));// const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\nvar available=players.filter(function(p){return p.name!==player.name;});setPlayers(available);};var drafted=function drafted(player){var data=localStorage.getItem('dd-drafted')||'[]';var drafted=JSON.parse(data);drafted.push(player);localStorage.setItem('dd-drafted',JSON.stringify(drafted));// const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\nvar available=players.filter(function(p){return p.name!==player.name;});setPlayers(available);};return/*#__PURE__*/_jsx(IonPage,{id:\"home-page\",children:/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsx(IonRefresher,{slot:\"fixed\",onIonRefresh:refresh,children:/*#__PURE__*/_jsx(IonRefresherContent,{})}),/*#__PURE__*/_jsx(IonList,{children:players.map(function(p){return/*#__PURE__*/_jsxs(IonItemSliding,{children:[/*#__PURE__*/_jsx(IonItemOptions,{side:\"start\",children:/*#__PURE__*/_jsx(IonItemOption,{onClick:function onClick(){return add(p);},children:\"Draft\"})}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsxs(IonLabel,{children:[p.name,\"(\",p.rank,\")\"]}),/*#__PURE__*/_jsx(IonLabel,{slot:\"end\",children:p.position}),/*#__PURE__*/_jsx(IonLabel,{slot:\"end\",children:p.tier})]}),/*#__PURE__*/_jsx(IonItemOptions,{side:\"end\",children:/*#__PURE__*/_jsx(IonItemOption,{color:\"danger\",onClick:function onClick(){return drafted(p);},children:\"Drafted\"})})]},p.name);})})]})});};export default Draft;","map":{"version":3,"sources":["/Users/scott/projects/ffdraft/draft-day/src/pages/Draft.tsx"],"names":["useState","IonContent","IonList","IonPage","IonRefresher","IonRefresherContent","useIonViewWillEnter","IonItemSliding","IonItem","IonLabel","IonItemOptions","IonItemOption","Draft","players","setPlayers","fetchAvailablePlayers","then","cache","fetchPlayers","fetchDrafted","drafted","filter","p","findIndex","d","name","data","localStorage","getItem","JSON","parse","fetch","res","json","setItem","stringify","rankings","all","Promise","resolve","refresh","e","detail","complete","add","player","myPlayers","push","available","map","rank","position","tier"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport {\n  IonContent,\n  IonList,\n  IonPage,\n  IonRefresher,\n  IonRefresherContent,\n  useIonViewWillEnter\n} from '@ionic/react';\nimport './Home.css';\n\nimport { IonItemSliding, IonItem, IonLabel, IonItemOptions, IonItemOption } from '@ionic/react';\n\n\nconst Draft: React.FC = () => {\n\n  const [players, setPlayers] = useState<any[]>([]);\n\n  useIonViewWillEnter(() => {\n    fetchAvailablePlayers(true).then((players) =>\n      setPlayers(players)\n    );\n  });\n\n  const fetchAvailablePlayers = async(cache: boolean) => {\n    const players = await fetchPlayers(cache);\n    const drafted = await fetchDrafted();\n    return players.filter((p: any) => {\n      return drafted.findIndex((d: any) => d.name === p.name) === -1;\n    });\n  }\n\n  const fetchPlayers = async(cache: boolean) => {\n    if (cache) {\n      const data = localStorage.getItem('dd-all-players');\n      if (data) {\n        return JSON.parse(data);\n      }\n    }\n    const res = await fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');\n    const players = await res.json();\n    localStorage.setItem('dd-all-players', JSON.stringify(players.rankings));\n    return players.rankings;\n  }\n\n  const fetchDrafted = async() => {\n    let data = localStorage.getItem('dd-players') || '[]';\n    const players = JSON.parse(data);\n    data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    const all = [...players, ...drafted];\n    return Promise.resolve(all);\n  }\n\n  const refresh = (e: CustomEvent) => {\n    fetchAvailablePlayers(false).then((players) => {\n      setPlayers(players);\n      e.detail.complete();\n    })\n  };\n\n\n  const add = (player: any) => {\n    const data = localStorage.getItem('dd-players') || '[]';\n    const myPlayers = JSON.parse(data);\n    myPlayers.push(player);\n    localStorage.setItem('dd-players', JSON.stringify(myPlayers));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  const drafted = (player: any) => {\n    const data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    drafted.push(player);\n    localStorage.setItem('dd-drafted', JSON.stringify(drafted));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  return (\n    <IonPage id=\"home-page\">\n      {/* <IonHeader>\n        <IonToolbar>\n          <IonTitle>Players</IonTitle>\n        </IonToolbar>\n      </IonHeader> */}\n      <IonContent>\n\n        <IonRefresher slot=\"fixed\" onIonRefresh={refresh}>\n          <IonRefresherContent></IonRefresherContent>\n        </IonRefresher>\n\n        {/* <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">\n              Inbox\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader> */}\n\n        <IonList>\n          {/* {players.map(m => <PlayerListItem key={m.name} player={m} />)} */}\n          {players.map(p => {\n            return (\n            <IonItemSliding key={p.name}>\n              <IonItemOptions side=\"start\">\n                <IonItemOption onClick={() => add(p)}>Draft</IonItemOption>\n              </IonItemOptions>\n          \n              <IonItem>\n                <IonLabel>{p.name}({p.rank})</IonLabel>\n                <IonLabel slot=\"end\">{p.position}</IonLabel>\n                <IonLabel slot=\"end\">{p.tier}</IonLabel>\n              </IonItem>\n          \n              <IonItemOptions side=\"end\">\n                <IonItemOption color=\"danger\" onClick={() => drafted(p)}>Drafted</IonItemOption>\n              </IonItemOptions>\n            </IonItemSliding>\n            )\n          })}\n        </IonList>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Draft;\n"]},"metadata":{},"sourceType":"module"}