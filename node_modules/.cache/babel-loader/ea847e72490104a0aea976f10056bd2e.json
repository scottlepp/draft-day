{"ast":null,"code":"import _toConsumableArray from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/scott/projects/ffdraft/draft-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{IonContent,IonList,IonPage,useIonViewWillEnter}from'@ionic/react';import'./Home.css';import{IonItemSliding,IonItem,IonLabel,IonItemOptions,IonItemOption}from'@ionic/react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Draft=function Draft(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),players=_useState2[0],setPlayers=_useState2[1];useIonViewWillEnter(function(){fetchAvailablePlayers().then(function(players){return setPlayers(players);});});var fetchAvailablePlayers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var players,drafted;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchPlayers();case 2:players=_context.sent;_context.next=5;return fetchDrafted();case 5:drafted=_context.sent;return _context.abrupt(\"return\",players.filter(function(p){return drafted.findIndex(function(d){return d.name===p.name;})===-1;}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchAvailablePlayers(){return _ref.apply(this,arguments);};}();var fetchPlayers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,players;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:players=_context2.sent;return _context2.abrupt(\"return\",players.rankings);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchPlayers(){return _ref2.apply(this,arguments);};}();var fetchDrafted=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data,players,drafted,all;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=localStorage.getItem('dd-players')||'[]';players=JSON.parse(data);data=localStorage.getItem('dd-drafted')||'[]';drafted=JSON.parse(data);all=[].concat(_toConsumableArray(players),_toConsumableArray(drafted));return _context3.abrupt(\"return\",Promise.resolve(all));case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchDrafted(){return _ref3.apply(this,arguments);};}();var refresh=function refresh(e){setTimeout(function(){e.detail.complete();},3000);};var add=function add(player){var data=localStorage.getItem('dd-players')||'[]';var myPlayers=JSON.parse(data);myPlayers.push(player);localStorage.setItem('dd-players',JSON.stringify(myPlayers));// const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\nvar available=players.filter(function(p){return p.name!==player.name;});setPlayers(available);};var drafted=function drafted(player){var data=localStorage.getItem('dd-drafted')||'[]';var drafted=JSON.parse(data);drafted.push(player);localStorage.setItem('dd-drafted',JSON.stringify(drafted));// const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\nvar available=players.filter(function(p){return p.name!==player.name;});setPlayers(available);};return/*#__PURE__*/_jsx(IonPage,{id:\"home-page\",children:/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsx(IonList,{children:players.map(function(p){return/*#__PURE__*/_jsxs(IonItemSliding,{children:[/*#__PURE__*/_jsx(IonItemOptions,{side:\"start\",children:/*#__PURE__*/_jsx(IonItemOption,{onClick:function onClick(){return add(p);},children:\"Draft\"})}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsxs(IonLabel,{children:[p.name,\"(\",p.rank,\")\"]}),/*#__PURE__*/_jsx(IonLabel,{slot:\"end\",children:p.position}),/*#__PURE__*/_jsx(IonLabel,{slot:\"end\",children:p.tier})]}),/*#__PURE__*/_jsx(IonItemOptions,{side:\"end\",children:/*#__PURE__*/_jsx(IonItemOption,{color:\"danger\",onClick:function onClick(){return drafted(p);},children:\"Drafted\"})})]},p.name);})})})});};export default Draft;","map":{"version":3,"sources":["/Users/scott/projects/ffdraft/draft-day/src/pages/Draft.tsx"],"names":["useState","IonContent","IonList","IonPage","useIonViewWillEnter","IonItemSliding","IonItem","IonLabel","IonItemOptions","IonItemOption","Draft","players","setPlayers","fetchAvailablePlayers","then","fetchPlayers","fetchDrafted","drafted","filter","p","findIndex","d","name","fetch","res","json","rankings","data","localStorage","getItem","JSON","parse","all","Promise","resolve","refresh","e","setTimeout","detail","complete","add","player","myPlayers","push","setItem","stringify","available","map","rank","position","tier"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport {\n  IonBadge,\n  IonContent,\n  IonHeader,\n  IonList,\n  IonPage,\n  IonRefresher,\n  IonRefresherContent,\n  IonRouterOutlet,\n  IonTabBar,\n  IonTabButton,\n  IonTabs,\n  IonTitle,\n  IonToolbar,\n  useIonViewWillEnter\n} from '@ionic/react';\nimport './Home.css';\nimport PlayerListItem from '../components/PlayerListItem';\n\nimport { IonItemSliding, IonItem, IonLabel, IonItemOptions, IonItemOption, IonIcon, IonNote } from '@ionic/react';\n\nimport { heart, trash, star, archive, ellipsisHorizontal, ellipsisVertical } from 'ionicons/icons';\n\nimport { calendar, personCircle, map, informationCircle } from 'ionicons/icons';\nimport { Redirect, Route } from 'react-router';\n\nconst Draft: React.FC = () => {\n\n  const [players, setPlayers] = useState<any[]>([]);\n\n  useIonViewWillEnter(() => {\n    fetchAvailablePlayers().then((players) =>\n      setPlayers(players)\n    );\n  });\n\n  const fetchAvailablePlayers = async() => {\n    const players = await fetchPlayers();\n    const drafted = await fetchDrafted();\n    return players.filter((p: any) => {\n      return drafted.findIndex((d: any) => d.name === p.name) === -1;\n    });\n  }\n\n  const fetchPlayers = async() => {\n    const res = await fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');\n    const players = await res.json();\n    return players.rankings;\n  }\n\n  const fetchDrafted = async() => {\n    let data = localStorage.getItem('dd-players') || '[]';\n    const players = JSON.parse(data);\n    data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    const all = [...players, ...drafted];\n    return Promise.resolve(all);\n  }\n\n  const refresh = (e: CustomEvent) => {\n    setTimeout(() => {\n      e.detail.complete();\n    }, 3000);\n  };\n\n\n  const add = (player: any) => {\n    const data = localStorage.getItem('dd-players') || '[]';\n    const myPlayers = JSON.parse(data);\n    myPlayers.push(player);\n    localStorage.setItem('dd-players', JSON.stringify(myPlayers));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  const drafted = (player: any) => {\n    const data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    drafted.push(player);\n    localStorage.setItem('dd-drafted', JSON.stringify(drafted));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  return (\n    <IonPage id=\"home-page\">\n      {/* <IonHeader>\n        <IonToolbar>\n          <IonTitle>Players</IonTitle>\n        </IonToolbar>\n      </IonHeader> */}\n      <IonContent>\n\n        {/* <IonRefresher slot=\"fixed\" onIonRefresh={refresh}>\n          <IonRefresherContent></IonRefresherContent>\n        </IonRefresher> */}\n\n        {/* <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">\n              Inbox\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader> */}\n\n        <IonList>\n          {/* {players.map(m => <PlayerListItem key={m.name} player={m} />)} */}\n          {players.map(p => {\n            return (\n            <IonItemSliding key={p.name}>\n              <IonItemOptions side=\"start\">\n                <IonItemOption onClick={() => add(p)}>Draft</IonItemOption>\n              </IonItemOptions>\n          \n              <IonItem>\n                <IonLabel>{p.name}({p.rank})</IonLabel>\n                <IonLabel slot=\"end\">{p.position}</IonLabel>\n                <IonLabel slot=\"end\">{p.tier}</IonLabel>\n              </IonItem>\n          \n              <IonItemOptions side=\"end\">\n                <IonItemOption color=\"danger\" onClick={() => drafted(p)}>Drafted</IonItemOption>\n              </IonItemOptions>\n            </IonItemSliding>\n            )\n          })}\n        </IonList>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Draft;\n"]},"metadata":{},"sourceType":"module"}