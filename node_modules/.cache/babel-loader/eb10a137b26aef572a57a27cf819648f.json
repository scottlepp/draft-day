{"ast":null,"code":"var _jsxFileName = \"/Users/scott/projects/ffdraft/draft-day/src/pages/Draft.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { IonContent, IonList, IonPage, IonRefresher, IonRefresherContent, useIonViewWillEnter } from '@ionic/react';\nimport './Home.css';\nimport { IonItemSliding, IonItem, IonLabel, IonItemOptions, IonItemOption } from '@ionic/react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Draft = () => {\n  _s();\n\n  const [players, setPlayers] = useState([]);\n  useIonViewWillEnter(() => {\n    fetchAvailablePlayers(true).then(players => setPlayers(players));\n  });\n\n  const fetchAvailablePlayers = async cache => {\n    const players = await fetchPlayers(cache);\n    const drafted = await fetchDrafted();\n    return players.filter(p => {\n      return drafted.findIndex(d => d.name === p.name) === -1;\n    });\n  };\n\n  const fetchPlayers = async cache => {\n    if (cache) {\n      const data = localStorage.getItem('dd-all-players');\n\n      if (data) {\n        return JSON.parse(data);\n      }\n    }\n\n    const res = await fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');\n    const players = await res.json();\n    localStorage.setItem('dd-all-players', JSON.stringify(players.rankings));\n    return players.rankings;\n  };\n\n  const fetchDrafted = async () => {\n    let data = localStorage.getItem('dd-players') || '[]';\n    const players = JSON.parse(data);\n    data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    const all = [...players, ...drafted];\n    return Promise.resolve(all);\n  };\n\n  const refresh = e => {\n    fetchAvailablePlayers(false).then(players => setPlayers(players));\n  };\n\n  const add = player => {\n    const data = localStorage.getItem('dd-players') || '[]';\n    const myPlayers = JSON.parse(data);\n    myPlayers.push(player);\n    localStorage.setItem('dd-players', JSON.stringify(myPlayers)); // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n\n    const available = players.filter(p => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  const drafted = player => {\n    const data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    drafted.push(player);\n    localStorage.setItem('dd-drafted', JSON.stringify(drafted)); // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n\n    const available = players.filter(p => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    id: \"home-page\",\n    children: /*#__PURE__*/_jsxDEV(IonContent, {\n      children: [/*#__PURE__*/_jsxDEV(IonRefresher, {\n        slot: \"fixed\",\n        onIonRefresh: refresh,\n        children: /*#__PURE__*/_jsxDEV(IonRefresherContent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IonList, {\n        children: players.map(p => {\n          return /*#__PURE__*/_jsxDEV(IonItemSliding, {\n            children: [/*#__PURE__*/_jsxDEV(IonItemOptions, {\n              side: \"start\",\n              children: /*#__PURE__*/_jsxDEV(IonItemOption, {\n                onClick: () => add(p),\n                children: \"Draft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n              children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n                children: [p.name, \"(\", p.rank, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IonLabel, {\n                slot: \"end\",\n                children: p.position\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IonLabel, {\n                slot: \"end\",\n                children: p.tier\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IonItemOptions, {\n              side: \"end\",\n              children: /*#__PURE__*/_jsxDEV(IonItemOption, {\n                color: \"danger\",\n                onClick: () => drafted(p),\n                children: \"Drafted\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, p.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Draft, \"ZbpRx4coA8lK4CkWD6abd2SH7jo=\", false, function () {\n  return [useIonViewWillEnter];\n});\n\n_c = Draft;\nexport default Draft;\n\nvar _c;\n\n$RefreshReg$(_c, \"Draft\");","map":{"version":3,"sources":["/Users/scott/projects/ffdraft/draft-day/src/pages/Draft.tsx"],"names":["useState","IonContent","IonList","IonPage","IonRefresher","IonRefresherContent","useIonViewWillEnter","IonItemSliding","IonItem","IonLabel","IonItemOptions","IonItemOption","Draft","players","setPlayers","fetchAvailablePlayers","then","cache","fetchPlayers","drafted","fetchDrafted","filter","p","findIndex","d","name","data","localStorage","getItem","JSON","parse","res","fetch","json","setItem","stringify","rankings","all","Promise","resolve","refresh","e","add","player","myPlayers","push","available","map","rank","position","tier"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SACEC,UADF,EAEEC,OAFF,EAGEC,OAHF,EAIEC,YAJF,EAKEC,mBALF,EAMEC,mBANF,QAOO,cAPP;AAQA,OAAO,YAAP;AAEA,SAASC,cAAT,EAAyBC,OAAzB,EAAkCC,QAAlC,EAA4CC,cAA5C,EAA4DC,aAA5D,QAAiF,cAAjF;;;AAGA,MAAMC,KAAe,GAAG,MAAM;AAAA;;AAE5B,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAQ,EAAR,CAAtC;AAEAM,EAAAA,mBAAmB,CAAC,MAAM;AACxBS,IAAAA,qBAAqB,CAAC,IAAD,CAArB,CAA4BC,IAA5B,CAAkCH,OAAD,IAC/BC,UAAU,CAACD,OAAD,CADZ;AAGD,GAJkB,CAAnB;;AAMA,QAAME,qBAAqB,GAAG,MAAME,KAAN,IAAyB;AACrD,UAAMJ,OAAO,GAAG,MAAMK,YAAY,CAACD,KAAD,CAAlC;AACA,UAAME,OAAO,GAAG,MAAMC,YAAY,EAAlC;AACA,WAAOP,OAAO,CAACQ,MAAR,CAAgBC,CAAD,IAAY;AAChC,aAAOH,OAAO,CAACI,SAAR,CAAmBC,CAAD,IAAYA,CAAC,CAACC,IAAF,KAAWH,CAAC,CAACG,IAA3C,MAAqD,CAAC,CAA7D;AACD,KAFM,CAAP;AAGD,GAND;;AAQA,QAAMP,YAAY,GAAG,MAAMD,KAAN,IAAyB;AAC5C,QAAIA,KAAJ,EAAW;AACT,YAAMS,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAb;;AACA,UAAIF,IAAJ,EAAU;AACR,eAAOG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;AACD;AACF;;AACD,UAAMK,GAAG,GAAG,MAAMC,KAAK,CAAC,gEAAD,CAAvB;AACA,UAAMnB,OAAO,GAAG,MAAMkB,GAAG,CAACE,IAAJ,EAAtB;AACAN,IAAAA,YAAY,CAACO,OAAb,CAAqB,gBAArB,EAAuCL,IAAI,CAACM,SAAL,CAAetB,OAAO,CAACuB,QAAvB,CAAvC;AACA,WAAOvB,OAAO,CAACuB,QAAf;AACD,GAXD;;AAaA,QAAMhB,YAAY,GAAG,YAAW;AAC9B,QAAIM,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,IAAjD;AACA,UAAMf,OAAO,GAAGgB,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAhB;AACAA,IAAAA,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,IAA7C;AACA,UAAMT,OAAO,GAAGU,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAhB;AACA,UAAMW,GAAG,GAAG,CAAC,GAAGxB,OAAJ,EAAa,GAAGM,OAAhB,CAAZ;AACA,WAAOmB,OAAO,CAACC,OAAR,CAAgBF,GAAhB,CAAP;AACD,GAPD;;AASA,QAAMG,OAAO,GAAIC,CAAD,IAAoB;AAClC1B,IAAAA,qBAAqB,CAAC,KAAD,CAArB,CAA6BC,IAA7B,CAAmCH,OAAD,IAChCC,UAAU,CAACD,OAAD,CADZ;AAGD,GAJD;;AAOA,QAAM6B,GAAG,GAAIC,MAAD,IAAiB;AAC3B,UAAMjB,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,IAAnD;AACA,UAAMgB,SAAS,GAAGf,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAlB;AACAkB,IAAAA,SAAS,CAACC,IAAV,CAAeF,MAAf;AACAhB,IAAAA,YAAY,CAACO,OAAb,CAAqB,YAArB,EAAmCL,IAAI,CAACM,SAAL,CAAeS,SAAf,CAAnC,EAJ2B,CAK3B;;AACA,UAAME,SAAS,GAAGjC,OAAO,CAACQ,MAAR,CAAgBC,CAAD,IAAWA,CAAC,CAACG,IAAF,KAAWkB,MAAM,CAAClB,IAA5C,CAAlB;AACAX,IAAAA,UAAU,CAACgC,SAAD,CAAV;AACD,GARD;;AAUA,QAAM3B,OAAO,GAAIwB,MAAD,IAAiB;AAC/B,UAAMjB,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,IAAnD;AACA,UAAMT,OAAO,GAAGU,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAhB;AACAP,IAAAA,OAAO,CAAC0B,IAAR,CAAaF,MAAb;AACAhB,IAAAA,YAAY,CAACO,OAAb,CAAqB,YAArB,EAAmCL,IAAI,CAACM,SAAL,CAAehB,OAAf,CAAnC,EAJ+B,CAK/B;;AACA,UAAM2B,SAAS,GAAGjC,OAAO,CAACQ,MAAR,CAAgBC,CAAD,IAAWA,CAAC,CAACG,IAAF,KAAWkB,MAAM,CAAClB,IAA5C,CAAlB;AACAX,IAAAA,UAAU,CAACgC,SAAD,CAAV;AACD,GARD;;AAUA,sBACE,QAAC,OAAD;AAAS,IAAA,EAAE,EAAC,WAAZ;AAAA,2BAME,QAAC,UAAD;AAAA,8BAEE,QAAC,YAAD;AAAc,QAAA,IAAI,EAAC,OAAnB;AAA2B,QAAA,YAAY,EAAEN,OAAzC;AAAA,+BACE,QAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF,eAcE,QAAC,OAAD;AAAA,kBAEG3B,OAAO,CAACkC,GAAR,CAAYzB,CAAC,IAAI;AAChB,8BACA,QAAC,cAAD;AAAA,oCACE,QAAC,cAAD;AAAgB,cAAA,IAAI,EAAC,OAArB;AAAA,qCACE,QAAC,aAAD;AAAe,gBAAA,OAAO,EAAE,MAAMoB,GAAG,CAACpB,CAAD,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAKE,QAAC,OAAD;AAAA,sCACE,QAAC,QAAD;AAAA,2BAAWA,CAAC,CAACG,IAAb,OAAoBH,CAAC,CAAC0B,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,QAAC,QAAD;AAAU,gBAAA,IAAI,EAAC,KAAf;AAAA,0BAAsB1B,CAAC,CAAC2B;AAAxB;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE,QAAC,QAAD;AAAU,gBAAA,IAAI,EAAC,KAAf;AAAA,0BAAsB3B,CAAC,CAAC4B;AAAxB;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eAWE,QAAC,cAAD;AAAgB,cAAA,IAAI,EAAC,KAArB;AAAA,qCACE,QAAC,aAAD;AAAe,gBAAA,KAAK,EAAC,QAArB;AAA8B,gBAAA,OAAO,EAAE,MAAM/B,OAAO,CAACG,CAAD,CAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAXF;AAAA,aAAqBA,CAAC,CAACG,IAAvB;AAAA;AAAA;AAAA;AAAA,kBADA;AAiBD,SAlBA;AAFH;AAAA;AAAA;AAAA;AAAA,cAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,UADF;AA8CD,CAjHD;;GAAMb,K;UAIJN,mB;;;KAJIM,K;AAmHN,eAAeA,KAAf","sourcesContent":["import { useState } from 'react';\nimport {\n  IonContent,\n  IonList,\n  IonPage,\n  IonRefresher,\n  IonRefresherContent,\n  useIonViewWillEnter\n} from '@ionic/react';\nimport './Home.css';\n\nimport { IonItemSliding, IonItem, IonLabel, IonItemOptions, IonItemOption } from '@ionic/react';\n\n\nconst Draft: React.FC = () => {\n\n  const [players, setPlayers] = useState<any[]>([]);\n\n  useIonViewWillEnter(() => {\n    fetchAvailablePlayers(true).then((players) =>\n      setPlayers(players)\n    );\n  });\n\n  const fetchAvailablePlayers = async(cache: boolean) => {\n    const players = await fetchPlayers(cache);\n    const drafted = await fetchDrafted();\n    return players.filter((p: any) => {\n      return drafted.findIndex((d: any) => d.name === p.name) === -1;\n    });\n  }\n\n  const fetchPlayers = async(cache: boolean) => {\n    if (cache) {\n      const data = localStorage.getItem('dd-all-players');\n      if (data) {\n        return JSON.parse(data);\n      }\n    }\n    const res = await fetch('https://jayzheng-ff-api.herokuapp.com/rankings?format=standard');\n    const players = await res.json();\n    localStorage.setItem('dd-all-players', JSON.stringify(players.rankings));\n    return players.rankings;\n  }\n\n  const fetchDrafted = async() => {\n    let data = localStorage.getItem('dd-players') || '[]';\n    const players = JSON.parse(data);\n    data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    const all = [...players, ...drafted];\n    return Promise.resolve(all);\n  }\n\n  const refresh = (e: CustomEvent) => {\n    fetchAvailablePlayers(false).then((players) =>\n      setPlayers(players)\n    );\n  };\n\n\n  const add = (player: any) => {\n    const data = localStorage.getItem('dd-players') || '[]';\n    const myPlayers = JSON.parse(data);\n    myPlayers.push(player);\n    localStorage.setItem('dd-players', JSON.stringify(myPlayers));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  const drafted = (player: any) => {\n    const data = localStorage.getItem('dd-drafted') || '[]';\n    const drafted = JSON.parse(data);\n    drafted.push(player);\n    localStorage.setItem('dd-drafted', JSON.stringify(drafted));\n    // const available = players.filter((p:any) => myPlayers.findIndex((m: any) => m.name === player.name))\n    const available = players.filter((p:any) => p.name !== player.name);\n    setPlayers(available);\n  };\n\n  return (\n    <IonPage id=\"home-page\">\n      {/* <IonHeader>\n        <IonToolbar>\n          <IonTitle>Players</IonTitle>\n        </IonToolbar>\n      </IonHeader> */}\n      <IonContent>\n\n        <IonRefresher slot=\"fixed\" onIonRefresh={refresh}>\n          <IonRefresherContent></IonRefresherContent>\n        </IonRefresher>\n\n        {/* <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">\n              Inbox\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader> */}\n\n        <IonList>\n          {/* {players.map(m => <PlayerListItem key={m.name} player={m} />)} */}\n          {players.map(p => {\n            return (\n            <IonItemSliding key={p.name}>\n              <IonItemOptions side=\"start\">\n                <IonItemOption onClick={() => add(p)}>Draft</IonItemOption>\n              </IonItemOptions>\n          \n              <IonItem>\n                <IonLabel>{p.name}({p.rank})</IonLabel>\n                <IonLabel slot=\"end\">{p.position}</IonLabel>\n                <IonLabel slot=\"end\">{p.tier}</IonLabel>\n              </IonItem>\n          \n              <IonItemOptions side=\"end\">\n                <IonItemOption color=\"danger\" onClick={() => drafted(p)}>Drafted</IonItemOption>\n              </IonItemOptions>\n            </IonItemSliding>\n            )\n          })}\n        </IonList>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Draft;\n"]},"metadata":{},"sourceType":"module"}